name: Update OpenRouter Guardrail

on:
  schedule:
    - cron: '0 6 * * *'  # Daily at 6am UTC
  workflow_dispatch:      # Manual trigger

concurrency:
  group: update-openrouter-guardrail
  cancel-in-progress: true

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Update guardrail
        uses: ./
        with:
          provisioning_key: ${{ secrets.OPENROUTER_PROVISIONING_KEY }}
          guardrail_name: ${{ vars.OPENROUTER_GUARDRAIL_NAME }}
          upload_inputs: "true"
